@using DemoMvcApp.Html
@{
    // ASP.Net MVC template functionality tracks models that have been displayed to prevent
    // endless loops due to circular references within the model graph. 

    // However, the nested call is valid here - we call Html.Display to display the model 
    // within the surrounding HTML - so we need to remove the current model from the
    // list of tracked objects.
    TemplateHelper.RemoveModelFromVisitedObjects(ViewData);

    var templateParams = ViewData["TemplateParams"] as TemplateParams ?? new TemplateParams();
}
<div class="display-label">
    @Html.Label("")
</div>
<div class="display-field">
    @Html.Display("", templateParams.TemplateName, templateParams.HtmlFieldName, templateParams.AdditionalViewData)
</div>

